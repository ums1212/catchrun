# 📱 앱 개발 기획서
## 앱명: **캐치런 (CatchRun)**

현실 세계에서 즐기는 경찰과 도둑 추격 놀이를 스마트폰으로 공정하고 전략적으로 즐기는  
QR/NFC 기반 실시간 팀 플레이 게임

---

## 1. 서비스 개요

### 1.1 서비스 목적
- 어린이·청소년·친구 그룹이 현실 공간에서 안전하게 즐길 수 있는 술래잡기형 게임 제공
- 스마트폰은 심판·기록·아이템 관리 도구 역할 수행
- QR/NFC 기반 명확한 판정으로 논쟁 최소화
- 점수·아이템·전략 요소를 통해 반복 플레이 유도

### 1.2 핵심 컨셉
- 현실 이동 + 디지털 판정
- 경찰 vs 도둑 팀플레이
- QR/NFC 기반 체포·구출 시스템

---

## 2. 플랫폼 및 기술 스택

### 2.1 플랫폼
- Flutter 기반 크로스플랫폼
- Android / iOS 동시 지원

### 2.2 주요 기술 스택
- 인증: Firebase Authentication (Google 로그인)
- 실시간 데이터: Firebase Firestore 또는 Supabase Realtime
- QR 스캔: Flutter QR 스캐너 라이브러리
- NFC: Flutter NFC 플러그인 (태그 기반)
- 사운드/진동: 게임 이벤트 알림
- 서버 역할:
    - 게임 방 상태 관리
    - 점수 계산 및 결과 집계

---

## 3. 사용자 계정 시스템

### 3.1 회원가입 / 로그인
- Google 로그인 방식
- Firebase Authentication 연동

#### 최초 로그인 시 처리
- 닉네임:
    - **랜덤 닉네임 자동 생성**
    - 사용자가 직접 수정 가능
- 아바타:
    - **기본 아바타 자동 생성**
    - 추후 아바타 프리셋 변경 기능 확장 예정

---

## 4. 매치 시스템

### 4.1 게임 만들기
- 게임 생성 시 자동 생성 항목:
    - **게임 번호: 9자리 랜덤 숫자**
    - **초대 코드(비밀번호): 6자리 랜덤 숫자**
- 설정 가능 항목:
    - 게임 이름
    - 제한 시간
    - 경찰 / 도둑 인원수 및 비율
    - QR 또는 NFC 사용 여부
- 게임 생성자는 방장(호스트) 역할

### 4.2 게임 찾기
- 게임 목록에서 선택
- 게임 번호 직접 입력
- 참가 조건:
    - 초대 코드 필수 입력

### 4.3 참가자 상태
- 대기 상태
- 경찰 상태
- 도둑(자유 상태)
- 도둑(수감 상태)

---

## 5. 플레이 방식 (핵심 게임 로직)

### 5.1 체포 시스템
- 경찰이 도둑을 잡은 후:
    - 도둑의 QR 촬영 또는 NFC 태그
- 체포 성공 시:
    - 도둑 상태가 자유 → 수감 상태로 변경
    - 수감 도둑은 감옥으로 이동

### 5.2 감옥 시스템
- 감옥은 **지정된 실제 위치(또는 영역)** 로 설정
- 수감 상태의 도둑은:
    - **지정된 감옥 위치에서만 머물러야 함**
    - **이동 불가**
    - 체포·아이템·구출 행동 불가
- 감옥에는 수감된 도둑들이 모여 있음

### 5.3 구출 시스템
- 자유 상태 도둑이:
    - 감옥에 있는 도둑의 QR 또는 NFC 태그
- 성공 시:
    - 수감 도둑 1명이 자유 상태로 변경
    - 구출한 도둑에게 보너스 점수 지급

---

## 6. 감옥 열쇠 아이템 (NFC 기반)

### 6.1 감옥 열쇠 규칙
- 물리적 NFC 카드 사용
- 도둑이 감옥 열쇠 NFC 태그 시:
    - 본인은 즉시 자유 상태 전환
    - **5분 동안 다른 수감 도둑을 구출할 수 없음**
    - 경찰 진영에 감옥 열쇠 사용 알림 전송
- 감옥 열쇠는:
    - 단 한 번만 사용 가능
    - 사용 후 비활성화

### 6.2 게임 밸런스 목적
- 위기 상황에서의 역전 수단
- 경찰 팀에게 전략적 압박 제공

---

## 7. 게임 종료 조건

### 7.1 제한 시간 방식
- 게임 시작 시 제한 시간 설정
- 종료 조건:
    - 제한 시간 내 모든 도둑이 수감 상태 → 경찰 승리
    - 제한 시간 종료 시 자유 상태 도둑 존재 → 도둑 승리

---

## 8. 점수 시스템

### 8.1 경찰 점수
- 도둑 1명 체포 시 점수 획득

### 8.2 도둑 점수
- 생존 점수:
    - 일정 시간마다 자동 지급
- 구출 점수:
    - 수감 도둑 구출 시 보너스 점수

### 8.3 아이템 사용
- 아이템 사용 시 점수 차감

### 8.4 게임 결과 화면
- 경찰 / 도둑 진영 승리 표시
- 개인별 점수 순위표 제공
- MVP(최고 점수) 표시

---

## 9. UX / UI 설계 원칙
- 플레이 중 화면 주시 최소화
- 주요 이벤트만:
    - 진동
    - 사운드
    - 간단한 전체 화면 알림
- 어린이·청소년 기준:
    - 큰 버튼
    - 명확한 상태 색상 구분

---

## 10. 추후 추가 기능 (V2 이후)

### 10.1 경찰 스캐너 기능
- 근처의 도둑 위치 힌트 제공
- 일회성 사용
- 쿨타임 및 점수 차감 적용

### 10.2 확장 아이디어
- 랭킹 시스템
- 아바타 커스터마이징
- 시즌 이벤트
- 학교 / 실내 전용 모드

---

## 11. MVP 개발 범위 요약

- Google 로그인
- 랜덤 닉네임 및 기본 아바타
- 게임 생성 및 참가
- QR 기반 체포 및 구출
- NFC 감옥 열쇠
- 제한 시간 및 점수 시스템
- 결과 순위표

(스캐너 기능 제외)

---

## 12. 개발 유의사항
- iOS 백그라운드 제약 고려
- GPS 기반 정확한 실시간 추적 미사용
- QR/NFC 판정을 최종 판정 기준으로 사용
- 서버는 상태 관리 및 기록 저장 중심
